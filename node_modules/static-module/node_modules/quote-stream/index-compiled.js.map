{"version":3,"sources":["index.js"],"names":[],"mappings":";;AAAA,IAAI,UAAU,QAAQ,UAAR,CAAd;AACA,IAAI,UAAU;AACV,WAAO,OAAO,GAAP,CADG;AAEV,iBAAa,OAAO,KAAP,CAFH;AAGV,kBAAc,OAAO,MAAP,CAHJ;AAIV,aAAS,OAAO,KAAP,CAJC;AAKV,aAAS,OAAO,KAAP,CALC;AAMV,aAAS,OAAO,KAAP,CANC;AAOV,aAAS,OAAO,KAAP,CAPC;AAQV,aAAS,OAAO,KAAP;AARC,CAAd;;AAWA,KAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,EAApB,EAAwB,GAAxB,EAA6B;AACzB,QAAI,IAAI,EAAE,QAAF,CAAW,EAAX,CAAR;AACA,YAAQ,CAAR,IAAa,OAAO,QAAQ,MAAM,IAAE,EAAE,MAAV,EAAkB,IAAlB,CAAuB,GAAvB,CAAR,GAAsC,CAA7C,CAAb;AACH;;AAED,IAAI,QAAQ;AACR,WAAO,IAAI,UAAJ,CAAe,CAAf,CADC;AAER,YAAQ,KAAK,UAAL,CAAgB,CAAhB,CAFA;AAGR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CAHK;AAIR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CAJK;AAKR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CALK;AAMR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CANK;AAOR,OAAG,KAAK,UAAL,CAAgB,CAAhB;AAPK,CAAZ;;AAUA,IAAI,MAAM,EAAV;AACA,IAAI,MAAM,KAAV,IAAmB,QAAQ,WAA3B;AACA,IAAI,MAAM,MAAV,IAAoB,QAAQ,YAA5B;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;;AAEA,OAAO,OAAP,GAAiB,YAAY;AACzB,QAAI,SAAS,QAAQ,KAAR,EAAe,GAAf,CAAb;AACA,WAAO,IAAP,CAAY,QAAQ,KAApB;AACA,WAAO,MAAP;;AAEA,aAAS,KAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAA1B,EAAgC;AAC5B,YAAI,SAAS,CAAb;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACjC,gBAAI,IAAI,IAAI,CAAJ,CAAR;AACA,gBAAI,IAAI,IAAI,CAAJ,CAAR;AACA,gBAAI,CAAJ,EAAO;AACH,oBAAI,OAAO,CAAE,IAAI,KAAJ,CAAU,MAAV,EAAkB,CAAlB,CAAF,EAAwB,CAAxB,CAAX;AACA,qBAAK,IAAL,CAAU,OAAO,MAAP,CAAc,IAAd,CAAV;AACA,yBAAS,IAAI,CAAb;AACH,aAJD,MAKK,IAAI,IAAI,EAAR,EAAY;AACb,oBAAI,OAAO,CAAE,IAAI,KAAJ,CAAU,MAAV,EAAkB,CAAlB,CAAF,EAAwB,QAAQ,CAAR,CAAxB,CAAX;AACA,qBAAK,IAAL,CAAU,OAAO,MAAP,CAAc,IAAd,CAAV;AACA,yBAAS,IAAI,CAAb;AACH;AACJ;AACD,YAAI,WAAW,CAAf,EAAkB,KAAK,IAAL,CAAU,GAAV,EAAlB,KACK,KAAK,IAAL,CAAU,IAAI,KAAJ,CAAU,MAAV,CAAV;AACL;AACH;AACD,aAAS,GAAT,CAAc,IAAd,EAAoB;AAChB,aAAK,IAAL,CAAU,QAAQ,KAAlB;AACA,aAAK,IAAL,CAAU,IAAV;AACH;AACJ,CA7BD","file":"index-compiled.js","sourcesContent":["var through = require('through2');\nvar buffers = {\n    quote: Buffer('\"'),\n    escapeQuote: Buffer('\\\\\"'),\n    escapeEscape: Buffer('\\\\\\\\'),\n    escapeB: Buffer('\\\\b'),\n    escapeF: Buffer('\\\\f'),\n    escapeN: Buffer('\\\\n'),\n    escapeR: Buffer('\\\\r'),\n    escapeT: Buffer('\\\\t')\n};\n\nfor (var i = 0; i < 32; i++) {\n    var s = i.toString(16);\n    buffers[i] = Buffer('\\\\u' + Array(5-s.length).join('0') + s);\n}\n\nvar codes = {\n    quote: '\"'.charCodeAt(0),\n    escape: '\\\\'.charCodeAt(0),\n    b: '\\b'.charCodeAt(0),\n    f: '\\f'.charCodeAt(0),\n    n: '\\n'.charCodeAt(0),\n    r: '\\r'.charCodeAt(0),\n    t: '\\t'.charCodeAt(0)\n};\n\nvar map = {};\nmap[codes.quote] = buffers.escapeQuote;\nmap[codes.escape] = buffers.escapeEscape;\nmap[codes.b] = buffers.escapeB;\nmap[codes.f] = buffers.escapeF;\nmap[codes.n] = buffers.escapeN;\nmap[codes.r] = buffers.escapeR;\nmap[codes.t] = buffers.escapeT;\n\nmodule.exports = function () {\n    var stream = through(write, end);\n    stream.push(buffers.quote);\n    return stream;\n    \n    function write (buf, enc, next) {\n        var offset = 0;\n        for (var i = 0; i < buf.length; i++) {\n            var c = buf[i];\n            var m = map[c];\n            if (m) {\n                var bufs = [ buf.slice(offset, i), m ];\n                this.push(Buffer.concat(bufs));\n                offset = i + 1;\n            }\n            else if (c < 32) {\n                var bufs = [ buf.slice(offset, i), buffers[c] ];\n                this.push(Buffer.concat(bufs));\n                offset = i + 1;\n            }\n        }\n        if (offset === 0) this.push(buf)\n        else this.push(buf.slice(offset));\n        next();\n    }\n    function end (next) {\n        this.push(buffers.quote);\n        this.push(null);\n    }\n};\n"]}