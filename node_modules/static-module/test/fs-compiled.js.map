{"version":3,"sources":["fs.js"],"names":[],"mappings":";;AAAA,IAAI,eAAe,QAAQ,KAAR,CAAnB;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,SAAS,QAAQ,eAAR,CAAb;AACA,IAAI,QAAQ,QAAQ,cAAR,CAAZ;AACA,IAAI,UAAU,QAAQ,UAAR,CAAd;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA,KAAK,aAAL,EAAoB,UAAU,CAAV,EAAa;AAC7B,MAAE,IAAF,CAAO,CAAP;AACA,QAAI,KAAK,aAAa;AAClB,YAAI,EAAE,UAAU,QAAZ;AADc,KAAb,EAEN,EAAE,MAAM,EAAE,WAAW,YAAY,KAAzB,EAAR,EAFM,CAAT;AAGA,eAAW,aAAX,EAA0B,IAA1B,CAA+B,EAA/B,EAAmC,IAAnC,CAAwC,OAAO,UAAU,IAAV,EAAgB;AAC3D,UAAE,KAAF,CAAQ,KAAK,QAAL,CAAc,MAAd,EAAsB,OAAtB,CAA8B,IAA9B,EAAmC,EAAnC,EAAuC,IAAvC,EAAR,EACI,yDACE,wBADF,GAEE,2BAHN;AAKA,iBAAS,CAAC,SAAD,CAAT,EAAqB,IAArB,EAA2B,EAAE,KAAK,GAAP,EAA3B;AACA,iBAAS,GAAT,CAAc,GAAd,EAAmB;AAAE,cAAE,KAAF,CAAQ,GAAR,EAAa,aAAb;AAA6B;AACrD,KARuC,CAAxC;AASH,CAdD;;AAgBA,KAAK,iBAAL,EAAwB,UAAU,CAAV,EAAa;AACjC,MAAE,IAAF,CAAO,CAAP;AACA,QAAI,KAAK,aAAa;AAClB,YAAI,EAAE,cAAc,YAAhB;AADc,KAAb,EAEN,EAAE,MAAM,EAAE,WAAW,YAAY,KAAzB,EAAR,EAFM,CAAT;AAGA,eAAW,SAAX,EAAsB,IAAtB,CAA2B,EAA3B,EAA+B,IAA/B,CAAoC,OAAO,UAAU,IAAV,EAAgB;AACvD,UAAE,KAAF,CAAQ,KAAK,QAAL,CAAc,MAAd,CAAR,EACI,mCACE,sBAFN;AAIA,iBAAS,CAAC,SAAD,CAAT,EAAqB,IAArB,EAA2B,EAAE,KAAK,GAAP,EAA3B;AACA,iBAAS,GAAT,CAAc,GAAd,EAAmB;AAAE,cAAE,KAAF,CAAQ,GAAR,EAAa,eAAb;AAA+B;AACvD,KAPmC,CAApC;AAQH,CAbD;;AAeA,SAAS,UAAT,CAAqB,IAArB,EAA2B;AACvB,WAAO,GAAG,gBAAH,CAAoB,KAAK,IAAL,CAAU,SAAV,EAAqB,IAArB,EAA2B,IAA3B,CAApB,CAAP;AACH;;AAED,SAAS,QAAT,CAAmB,IAAnB,EAAyB,EAAzB,EAA6B;AACzB,QAAI,SAAS,QAAQ,KAAR,EAAe,GAAf,CAAb;AACA,WAAO,IAAP,CAAY,kCAAkC,EAAlC,GAAuC,SAAnD;AACA,WAAO,GAAG,gBAAH,CAAoB,IAApB,EAA0B,IAA1B,CAA+B,OAA/B,EAAwC,IAAxC,CAA6C,MAA7C,CAAP;;AAEA,aAAS,KAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAA1B,EAAgC;AAAE,aAAK,IAAL,CAAU,GAAV,EAAgB;AAAQ;AAC1D,aAAS,GAAT,CAAc,IAAd,EAAoB;AAAE,aAAK,IAAL,CAAU,KAAV,EAAkB,KAAK,IAAL,CAAU,IAAV,EAAiB;AAAQ;AACpE;;AAED,SAAS,YAAT,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAC/B,WAAO,GAAG,gBAAH,CAAoB,IAApB,EAA0B,IAA1B,CAA+B,OAA/B,CAAP;AACH","file":"fs-compiled.js","sourcesContent":["var staticModule = require('../');\nvar test = require('tape');\nvar concat = require('concat-stream');\nvar quote = require('quote-stream');\nvar through = require('through2');\nvar fs = require('fs');\nvar path = require('path');\n\ntest('fs.readFile', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: { readFile: readFile }\n    }, { vars: { __dirname: __dirname + '/fs' } });\n    readStream('readfile.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8').replace(/;/g,'').trim(),\n            'process.nextTick(function(){(function (err, src) {\\n'\n            + '    console.log(src)\\n'\n            + '})(null,\"beep boop\\\\n\")})'\n        );\n        Function(['console'],body)({ log: log });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('fs.readFileSync', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: { readFileSync: readFileSync }\n    }, { vars: { __dirname: __dirname + '/fs' } });\n    readStream('html.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            'var html = \"EXTERMINATE\\\\n\";\\n'\n            + 'console.log(html);\\n'\n        );\n        Function(['console'],body)({ log: log });\n        function log (msg) { t.equal(msg, 'EXTERMINATE\\n') }\n    }));\n});\n\nfunction readStream (file) {\n    return fs.createReadStream(path.join(__dirname, 'fs', file));\n}\n\nfunction readFile (file, cb) {\n    var stream = through(write, end);\n    stream.push('process.nextTick(function(){(' + cb + ')(null,');\n    return fs.createReadStream(file).pipe(quote()).pipe(stream);\n    \n    function write (buf, enc, next) { this.push(buf); next() }\n    function end (next) { this.push(')})'); this.push(null); next() }\n}\n\nfunction readFileSync (file, opts) {\n    return fs.createReadStream(file).pipe(quote());\n}\n"]}