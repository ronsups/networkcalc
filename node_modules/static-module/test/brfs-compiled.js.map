{"version":3,"sources":["brfs.js"],"names":[],"mappings":"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","file":"brfs-compiled.js","sourcesContent":["var staticModule = require('../');\nvar test = require('tape');\nvar concat = require('concat-stream');\nvar quote = require('quote-stream');\nvar fs = require('fs');\nvar path = require('path');\nvar vm = require('vm');\n\ntest('readFileSync', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('source.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync attribute', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('attribute.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync attribute with multiple vars', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('attribute_vars.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            'var x = 5, y = 2;'\n            + '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync attribute with multiple require vars', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('multi_require.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            'var x = 5;'\n            + '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync attribute with multiple require vars including an uninitalized var', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('multi_require_with_uninitialized.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            'var x;'\n            + '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync attribute with multiple require vars x5', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('x5.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8').replace(/;/g,''),\n            'var a = 1, b = 2, c = 3, d = 4, '\n            + 'src = \"beep boop\\\\n\",\\n'\n            + '  e = 5\\n'\n            + 'console.log(src)\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync with bracket notation', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('brackets.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\ntest('readFileSync attribute bracket notation', function (t) {\n    t.plan(2);\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'brfs') } });\n    readStream('attribute_brackets.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(body.toString('utf8'),\n            '\\nvar src = \"beep boop\\\\n\";'\n            + '\\nconsole.log(src);\\n'\n        );\n        vm.runInNewContext(body.toString('utf8'), {\n            console: { log: log }\n        });\n        function log (msg) { t.equal(msg, 'beep boop\\n') }\n    }));\n});\n\nfunction readStream (file) {\n    return fs.createReadStream(path.join(__dirname, 'brfs', file));\n}\n"]}