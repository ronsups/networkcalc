{"version":3,"sources":["vars.js"],"names":[],"mappings":"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","file":"vars-compiled.js","sourcesContent":["var test = require('tape');\nvar concat = require('concat-stream');\nvar quote = require('quote-stream');\nvar staticModule = require('../');\nvar fs = require('fs');\nvar path = require('path');\n\ntest('multi-vars', function (t) {\n    t.plan(2);\n    \n    var expected = [ 'beep boop!' ];\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file, enc) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'vars') } });\n    \n    readStream('source.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(\n            body.toString('utf8').replace(/;/g,''),\n            'var html = \"beep boop\",\\n  x = \\'!\\'\\nconsole.log(html + x)\\n'\n        );\n        Function(['console'],body)({ log: log });\n        function log (msg) { t.equal(msg, expected.shift()) }\n    }));\n});\n\ntest('2-var', function (t) {\n    t.plan(2);\n    \n    var expected = [ 'beep boop' ];\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file, enc) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'vars') } });\n    \n    readStream('one.js').pipe(sm).pipe(concat(function (body) {\n        t.equal(\n            body.toString('utf8').replace(/;/g,''),\n            'var html = \"beep boop\"\\nconsole.log(html)\\n'\n        );\n        Function(['console'],body)({ log: log });\n        function log (msg) { t.equal(msg, expected.shift()) }\n    }));\n});\n\ntest('5-var', function (t) {\n    t.plan(1);\n    \n    var expected = [ 'beep boop123' ];\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file, enc) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'vars') } });\n    \n    readStream('five.js').pipe(sm).pipe(concat(function (body) {\n        Function(['console'],body)({ log: log });\n        function log (msg) { t.equal(msg, expected.shift()) }\n    }));\n});\n\ntest('multi consecutive require vars', function (t) {\n    t.plan(1);\n    \n    var expected = [ 'beep boop' ];\n    var sm = staticModule({\n        fs: {\n            readFileSync: function (file, enc) {\n                return fs.createReadStream(file).pipe(quote());\n            }\n        }\n    }, { vars: { __dirname: path.join(__dirname, 'vars') } });\n    \n    readStream('multi-require.js').pipe(sm).pipe(concat(function (body) {\n        Function(['console','require'],body)({ log: log }, function() { return {} });\n        function log (msg) { t.equal(msg, expected.shift()) }\n    }));\n});\n\nfunction readStream (file) {\n    return fs.createReadStream(path.join(__dirname, 'vars', file));\n}\n"]}