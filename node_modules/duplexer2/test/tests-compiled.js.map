{"version":3,"sources":["tests.js"],"names":[],"mappings":"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","file":"tests-compiled.js","sourcesContent":["var assert = require(\"chai\").assert;\n\nvar stream = require(\"readable-stream\");\n\nvar duplexer2 = require(\"../\");\n\ndescribe(\"duplexer2\", function() {\n  var writable, readable;\n\n  beforeEach(function() {\n    writable = new stream.Writable({objectMode: true});\n    readable = new stream.Readable({objectMode: true});\n\n    writable._write = function _write(input, encoding, done) {\n      return done();\n    };\n\n    readable._read = function _read(n) {\n    };\n  });\n\n  it(\"should interact with the writable stream properly for writing\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    writable._write = function _write(input, encoding, _done) {\n      assert.strictEqual(input, \"well hello there\");\n\n      return done();\n    };\n\n    duplex.write(\"well hello there\");\n  });\n\n  it(\"should interact with the readable stream properly for reading\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    duplex.on(\"data\", function(e) {\n      assert.strictEqual(e, \"well hello there\");\n\n      return done();\n    });\n\n    readable.push(\"well hello there\");\n  });\n\n  it(\"should end the writable stream, causing it to finish\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    writable.once(\"finish\", done);\n\n    duplex.end();\n  });\n\n  it(\"should finish when the writable stream finishes\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    duplex.once(\"finish\", done);\n\n    writable.end();\n  });\n\n  it(\"should end when the readable stream ends\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    // required to let \"end\" fire without reading\n    duplex.resume();\n    duplex.once(\"end\", done);\n\n    readable.push(null);\n  });\n\n  it(\"should bubble errors from the writable stream when no behaviour is specified\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    writable.emit(\"error\", originalErr);\n  });\n\n  it(\"should bubble errors from the readable stream when no behaviour is specified\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    readable.emit(\"error\", originalErr);\n  });\n\n  it(\"should bubble errors from the writable stream when bubbleErrors is true\", function(done) {\n    var duplex = duplexer2({bubbleErrors: true}, writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    writable.emit(\"error\", originalErr);\n  });\n\n  it(\"should bubble errors from the readable stream when bubbleErrors is true\", function(done) {\n    var duplex = duplexer2({bubbleErrors: true}, writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    readable.emit(\"error\", originalErr);\n  });\n\n  it(\"should not bubble errors from the writable stream when bubbleErrors is false\", function(done) {\n    var duplex = duplexer2({bubbleErrors: false}, writable, readable);\n\n    var timeout = setTimeout(done, 25);\n\n    duplex.on(\"error\", function(err) {\n      clearTimeout(timeout);\n\n      return done(Error(\"shouldn't bubble error\"));\n    });\n\n    // prevent uncaught error exception\n    writable.on(\"error\", function() {});\n\n    writable.emit(\"error\", Error(\"testing\"));\n  });\n\n  it(\"should not bubble errors from the readable stream when bubbleErrors is false\", function(done) {\n    var duplex = duplexer2({bubbleErrors: false}, writable, readable);\n\n    var timeout = setTimeout(done, 25);\n\n    duplex.on(\"error\", function(err) {\n      clearTimeout(timeout);\n\n      return done(Error(\"shouldn't bubble error\"));\n    });\n\n    // prevent uncaught error exception\n    readable.on(\"error\", function() {});\n\n    readable.emit(\"error\", Error(\"testing\"));\n  });\n});\n"]}