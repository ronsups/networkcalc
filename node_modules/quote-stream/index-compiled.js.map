{"version":3,"sources":["index.js"],"names":[],"mappings":";;AAAA,IAAI,UAAU,QAAQ,UAAR,CAAd;AACA,IAAI,SAAS,QAAQ,cAAR,CAAb;AACA,IAAI,UAAU;AACV,WAAO,OAAO,GAAP,CADG;AAEV,iBAAa,OAAO,KAAP,CAFH;AAGV,kBAAc,OAAO,MAAP,CAHJ;AAIV,aAAS,OAAO,KAAP,CAJC;AAKV,aAAS,OAAO,KAAP,CALC;AAMV,aAAS,OAAO,KAAP,CANC;AAOV,aAAS,OAAO,KAAP,CAPC;AAQV,aAAS,OAAO,KAAP,CARC;AASV,yBAAqB,OAAO,SAAP,CATX;AAUV,8BAA0B,OAAO,SAAP;AAVhB,CAAd;;AAaA,KAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,EAApB,EAAwB,GAAxB,EAA6B;AACzB,QAAI,IAAI,EAAE,QAAF,CAAW,EAAX,CAAR;AACA,YAAQ,CAAR,IAAa,OAAO,QAAQ,MAAM,IAAE,EAAE,MAAV,EAAkB,IAAlB,CAAuB,GAAvB,CAAR,GAAsC,CAA7C,CAAb;AACH;;AAED,IAAI,QAAQ;AACR,WAAO,IAAI,UAAJ,CAAe,CAAf,CADC;AAER,YAAQ,KAAK,UAAL,CAAgB,CAAhB,CAFA;AAGR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CAHK;AAIR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CAJK;AAKR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CALK;AAMR,OAAG,KAAK,UAAL,CAAgB,CAAhB,CANK;AAOR,OAAG,KAAK,UAAL,CAAgB,CAAhB;AAPK,CAAZ;;AAUA,IAAI,mBAAmB;AACnB,mBAAe,OAAO,QAAP,EAAiB,MAAjB,CADI;AAEnB,wBAAoB,OAAO,QAAP,EAAiB,MAAjB;AAFD,CAAvB;AAIA,IAAI,2BAA2B,iBAAiB,aAAjB,CAA+B,MAA9D,C;AACA,IAAI,2BAA2B,2BAA2B,CAA1D;AACA,IAAI,yBAAyB,iBAAiB,aAAjB,CAA+B,CAA/B,CAA7B,C;;AAEA,IAAI,MAAM,EAAV;AACA,IAAI,MAAM,KAAV,IAAmB,QAAQ,WAA3B;AACA,IAAI,MAAM,MAAV,IAAoB,QAAQ,YAA5B;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;AACA,IAAI,MAAM,CAAV,IAAe,QAAQ,OAAvB;;AAEA,OAAO,OAAP,GAAiB,YAAY;AACzB,QAAI,SAAS,QAAQ,KAAR,EAAe,GAAf,CAAb;AACA,WAAO,IAAP,CAAY,QAAQ,KAApB;AACA,WAAO,MAAP;;AAEA,aAAS,KAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAA1B,EAAgC;AAC5B,YAAI,SAAS,CAAb;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACjC,gBAAI,IAAI,IAAI,CAAJ,CAAR;AACA,gBAAI,IAAI,IAAI,CAAJ,CAAR;AACA,gBAAI,CAAJ,EAAO;AACH,oBAAI,OAAO,CAAE,IAAI,KAAJ,CAAU,MAAV,EAAkB,CAAlB,CAAF,EAAwB,CAAxB,CAAX;AACA,qBAAK,IAAL,CAAU,OAAO,MAAP,CAAc,IAAd,CAAV;AACA,yBAAS,IAAI,CAAb;AACH,aAJD,MAKK,IAAI,IAAI,EAAR,EAAY;AACb,oBAAI,OAAO,CAAE,IAAI,KAAJ,CAAU,MAAV,EAAkB,CAAlB,CAAF,EAAwB,QAAQ,CAAR,CAAxB,CAAX;AACA,qBAAK,IAAL,CAAU,OAAO,MAAP,CAAc,IAAd,CAAV;AACA,yBAAS,IAAI,CAAb;AACH,aAJI,MAKA,IAAI,MAAM,sBAAV,EAAkC;AACnC,oBAAI,SAAS,IAAI,KAAJ,CAAU,CAAV,EAAa,IAAI,wBAAjB,CAAb;AACA,oBAAI,YAAY,IAAhB;AACA,oBAAI,OAAO,MAAP,EAAe,iBAAiB,aAAhC,CAAJ,EAAoD;AAClD,gCAAY,QAAQ,mBAApB;AACD,iBAFD,MAEO,IAAI,OAAO,MAAP,EAAe,iBAAiB,kBAAhC,CAAJ,EAAyD;AAC9D,gCAAY,QAAQ,wBAApB;AACD;AACD,oBAAI,SAAJ,EAAe;AACX,wBAAI,OAAO,CAAE,IAAI,KAAJ,CAAU,MAAV,EAAkB,CAAlB,CAAF,EAAwB,SAAxB,CAAX;AACA,yBAAK,IAAL,CAAU,OAAO,MAAP,CAAc,IAAd,CAAV;AACA,6BAAS,IAAI,wBAAb;AACA,yBAAK,wBAAL;AACH;AACJ;AACJ;AACD,YAAI,WAAW,CAAf,EAAkB,KAAK,IAAL,CAAU,GAAV,EAAlB,KACK,KAAK,IAAL,CAAU,IAAI,KAAJ,CAAU,MAAV,CAAV;AACL;AACH;AACD,aAAS,GAAT,CAAc,IAAd,EAAoB;AAChB,aAAK,IAAL,CAAU,QAAQ,KAAlB;AACA,aAAK,IAAL,CAAU,IAAV;AACH;AACJ,CA5CD","file":"index-compiled.js","sourcesContent":["var through = require('through2');\nvar equals = require('buffer-equal')\nvar buffers = {\n    quote: Buffer('\"'),\n    escapeQuote: Buffer('\\\\\"'),\n    escapeEscape: Buffer('\\\\\\\\'),\n    escapeB: Buffer('\\\\b'),\n    escapeF: Buffer('\\\\f'),\n    escapeN: Buffer('\\\\n'),\n    escapeR: Buffer('\\\\r'),\n    escapeT: Buffer('\\\\t'),\n    escapeLineSeparator: Buffer('\\\\u2028'),\n    escapeParagraphSeparator: Buffer('\\\\u2029')\n};\n\nfor (var i = 0; i < 32; i++) {\n    var s = i.toString(16);\n    buffers[i] = Buffer('\\\\u' + Array(5-s.length).join('0') + s);\n}\n\nvar codes = {\n    quote: '\"'.charCodeAt(0),\n    escape: '\\\\'.charCodeAt(0),\n    b: '\\b'.charCodeAt(0),\n    f: '\\f'.charCodeAt(0),\n    n: '\\n'.charCodeAt(0),\n    r: '\\r'.charCodeAt(0),\n    t: '\\t'.charCodeAt(0)\n};\n\nvar multiByteBuffers = {\n    lineSeparator: Buffer('\\u2028', 'utf8'),\n    paragraphSeparator: Buffer('\\u2029', 'utf8')\n};\nvar multiByteSeparatorLength = multiByteBuffers.lineSeparator.length; // same for both\nvar multiByteSeparatorOffset = multiByteSeparatorLength - 1;\nvar multiByteSeparatorCode = multiByteBuffers.lineSeparator[0]; // same for both\n\nvar map = {};\nmap[codes.quote] = buffers.escapeQuote;\nmap[codes.escape] = buffers.escapeEscape;\nmap[codes.b] = buffers.escapeB;\nmap[codes.f] = buffers.escapeF;\nmap[codes.n] = buffers.escapeN;\nmap[codes.r] = buffers.escapeR;\nmap[codes.t] = buffers.escapeT;\n\nmodule.exports = function () {\n    var stream = through(write, end);\n    stream.push(buffers.quote);\n    return stream;\n    \n    function write (buf, enc, next) {\n        var offset = 0;\n        for (var i = 0; i < buf.length; i++) {\n            var c = buf[i];\n            var m = map[c];\n            if (m) {\n                var bufs = [ buf.slice(offset, i), m ];\n                this.push(Buffer.concat(bufs));\n                offset = i + 1;\n            }\n            else if (c < 32) {\n                var bufs = [ buf.slice(offset, i), buffers[c] ];\n                this.push(Buffer.concat(bufs));\n                offset = i + 1;\n            }\n            else if (c === multiByteSeparatorCode) {\n                var rawBuf = buf.slice(i, i + multiByteSeparatorLength);\n                var escapeBuf = null;\n                if (equals(rawBuf, multiByteBuffers.lineSeparator)) {\n                  escapeBuf = buffers.escapeLineSeparator;\n                } else if (equals(rawBuf, multiByteBuffers.paragraphSeparator)) {\n                  escapeBuf = buffers.escapeParagraphSeparator;\n                }\n                if (escapeBuf) {\n                    var bufs = [ buf.slice(offset, i), escapeBuf ];\n                    this.push(Buffer.concat(bufs));\n                    offset = i + multiByteSeparatorLength;\n                    i += multiByteSeparatorOffset\n                }\n            }\n        }\n        if (offset === 0) this.push(buf)\n        else this.push(buf.slice(offset));\n        next();\n    }\n    function end (next) {\n        this.push(buffers.quote);\n        this.push(null);\n    }\n};\n"]}