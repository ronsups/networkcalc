{"version":3,"sources":["run-tests.js"],"names":[],"mappings":";;;;;;;;AAOA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,OAAO,QAAQ,mBAAR,CAAX;;AAEA,SAAS,GAAT,CAAa,KAAb,EAAoB;AAClB,MAAI,QAAQ,CAAZ;AACA,MAAI,SAAS,CAAb;;AAEA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACrC,SAAK,IAAI,CAAT,IAAc,MAAM,CAAN,EAAS,QAAvB,EAAiC;AAC/B,UAAI,QAAQ,IAAR,CAAa,CAAb,CAAJ,EAAqB;AACnB;AACA,YAAI;AACF,gBAAM,CAAN,EAAS,QAAT,CAAkB,CAAlB,EAAqB,MAArB,EAA6B,IAA7B;AACA;AACD,SAHD,CAIA,OAAO,CAAP,EAAU;AACR,kBAAQ,GAAR,CAAY,YAAY,MAAM,CAAN,EAAS,IAArB,GAA4B,IAA5B,GAAmC,CAAnC,GAAuC,GAAnD;AACA,kBAAQ,GAAR,CAAY,EAAE,KAAd;AACD;AACF;AACF;AACF;;AAED,UAAQ,GAAR,CAAY,EAAZ;AACA,UAAQ,GAAR,CAAY,SAAS,KAAT,GAAiB,KAAjB,GAAyB,gBAArC;AACA,UAAQ,GAAR,CAAY,EAAZ;;AAEA,SAAO,QAAQ,MAAf;AACD;;AAED,SAAS,UAAT,CAAoB,CAApB,EAAuB;AACrB,MAAI,YAAY,QAAQ,IAAR,CAAa,CAAb,CAAhB;AACA,SAAO,YACH,KAAK,QAAL,CAAc,SAAd,MAA6B,CAD1B,GAEH,iBAAiB,IAAjB,CAAsB,CAAtB,CAFJ;AAGD;;AAED,SAAS,QAAT,CAAkB,CAAlB,EAAqB;AACnB,SAAO,kBAAkB,EAAE,OAAF,CAAU,OAAV,EAAmB,EAAnB,CAAzB;AACD;;AAED,IAAI,WAAW,GAAG,WAAH,CAAe,KAAK,IAAL,CAAU,SAAV,EAAqB,YAArB,CAAf,EACZ,MADY,CACL,UADK,EAEZ,GAFY,CAER,QAFQ,CAAf;;AAIA,IAAI,OAAO,IAAI,SAAS,GAAT,CAAa,OAAb,EAAsB,GAAtB,CAA0B,UAAU,GAAV,EAAe,CAAf,EAAkB;AACzD,SAAO;AACL,UAAM,SAAS,CAAT,CADD;AAEL,cAAU;AAFL,GAAP;AAID,CALc,CAAJ,CAAX;;AAOA,QAAQ,IAAR,CAAa,IAAb","file":"run-tests-compiled.js","sourcesContent":["#!/usr/bin/env node\n/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nvar assert = require('assert');\nvar fs = require('fs');\nvar path = require('path');\nvar util = require('./source-map/util');\n\nfunction run(tests) {\n  var total = 0;\n  var passed = 0;\n\n  for (var i = 0; i < tests.length; i++) {\n    for (var k in tests[i].testCase) {\n      if (/^test/.test(k)) {\n        total++;\n        try {\n          tests[i].testCase[k](assert, util);\n          passed++;\n        }\n        catch (e) {\n          console.log('FAILED ' + tests[i].name + ': ' + k + '!');\n          console.log(e.stack);\n        }\n      }\n    }\n  }\n\n  console.log('');\n  console.log(passed + ' / ' + total + ' tests passed.');\n  console.log('');\n\n  return total - passed;\n}\n\nfunction isTestFile(f) {\n  var testToRun = process.argv[2];\n  return testToRun\n    ? path.basename(testToRun) === f\n    : /^test\\-.*?\\.js/.test(f);\n}\n\nfunction toModule(f) {\n  return './source-map/' + f.replace(/\\.js$/, '');\n}\n\nvar requires = fs.readdirSync(path.join(__dirname, 'source-map'))\n  .filter(isTestFile)\n  .map(toModule);\n\nvar code = run(requires.map(require).map(function (mod, i) {\n  return {\n    name: requires[i],\n    testCase: mod\n  };\n}));\n\nprocess.exit(code);\n"]}