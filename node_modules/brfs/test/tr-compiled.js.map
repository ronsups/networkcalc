{"version":3,"sources":["tr.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,QAAQ,KAAR,EAAe,IAA1B;AACA,IAAI,aAAa,QAAQ,YAAR,CAAjB;AACA,IAAI,UAAU,QAAQ,SAAR,CAAd;;AAEA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA,KAAK,8BAAL,EAAqC,UAAU,CAAV,EAAa;AAC9C,MAAE,IAAF,CAAO,CAAP;;AAEA,QAAI,IAAI,YAAR;AACA,MAAE,GAAF,CAAM,YAAY,gBAAlB;AACA,MAAE,SAAF,CAAY,UAAU,IAAV,EAAgB;AACxB,YAAI,UAAU,EAAd;AACA,YAAI,CAAC,UAAU,IAAV,CAAe,IAAf,CAAL,EAA2B,OAAO,SAAP;AAC3B,eAAO,QAAQ,KAAR,EAAe,GAAf,CAAP;;AAEA,iBAAS,KAAT,CAAgB,GAAhB,EAAqB;AAAE,oBAAQ,IAAR,CAAa,GAAb;AAAmB;AAC1C,iBAAS,GAAT,GAAgB;AACZ,gBAAI,MAAM,OAAO,MAAP,CAAc,OAAd,EAAuB,QAAvB,CAAgC,MAAhC,CAAV;AACA,iBAAK,KAAL,CAAW,IAAI,OAAJ,CAAY,SAAZ,EAAuB,UAAvB,CAAX;AACA,iBAAK,KAAL,CAAW,IAAX;AACH;AACJ,KAXD;AAYA,MAAE,SAAF,CAAY,KAAK,OAAL,CAAa,SAAb,CAAZ;;AAEA,QAAI,KAAK,EAAE,MAAF,CAAS,UAAU,GAAV,EAAe,GAAf,EAAoB;AAClC,YAAI,GAAJ,EAAS,EAAE,IAAF,CAAO,GAAP;AACT,WAAG,eAAH,CAAmB,GAAnB,EAAwB,EAAE,SAAS,EAAE,KAAK,GAAP,EAAX,EAAxB;AACH,KAHQ,CAAT;AAIA,OAAG,EAAH,CAAM,WAAN,EAAmB,UAAU,EAAV,EAAc;AAC7B,WAAG,EAAH,CAAM,MAAN,EAAc,UAAU,IAAV,EAAgB;AAC1B,cAAE,KAAF,CAAQ,IAAR,EAAc,YAAY,gBAA1B;AACH,SAFD;AAGH,KAJD;;AAMA,aAAS,GAAT,CAAc,GAAd,EAAmB;AACf,UAAE,KAAF,CAAQ,EAAR,EAAY,GAAZ;AACH;AACJ,CAhCD","file":"tr-compiled.js","sourcesContent":["var test = require('tap').test;\nvar browserify = require('browserify');\nvar through = require('through');\n\nvar vm = require('vm');\nvar fs = require('fs');\nvar path = require('path');\n\ntest('parse non-js, non-json files', function (t) {\n    t.plan(2);\n    \n    var b = browserify();\n    b.add(__dirname + '/files/tr.beep');\n    b.transform(function (file) {\n        var buffers = [];\n        if (!/\\.beep$/.test(file)) return through();\n        return through(write, end);\n        \n        function write (buf) { buffers.push(buf) }\n        function end () {\n            var src = Buffer.concat(buffers).toString('utf8');\n            this.queue(src.replace(/\\bFN\\b/g, 'function'));\n            this.queue(null);\n        }\n    });\n    b.transform(path.dirname(__dirname));\n    \n    var bs = b.bundle(function (err, src) {\n        if (err) t.fail(err);\n        vm.runInNewContext(src, { console: { log: log } });\n    });\n    bs.on('transform', function (tr) {\n        tr.on('file', function (file) {\n            t.equal(file, __dirname + '/files/tr.html');\n        });\n    });\n    \n    function log (msg) {\n        t.equal(13, msg);\n    }\n});\n"]}