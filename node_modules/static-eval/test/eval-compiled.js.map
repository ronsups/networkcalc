{"version":3,"sources":["eval.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,WAAW,QAAQ,KAAR,CAAf;AACA,IAAI,QAAQ,QAAQ,SAAR,EAAmB,KAA/B;;AAEA,KAAK,UAAL,EAAiB,UAAU,CAAV,EAAa;AAC1B,MAAE,IAAF,CAAO,CAAP;;AAEA,QAAI,MAAM,4CAAV;AACA,QAAI,MAAM,MAAM,GAAN,EAAW,IAAX,CAAgB,CAAhB,EAAmB,UAA7B;AACA,QAAI,MAAM,SAAS,GAAT,EAAc;AACpB,WAAG,KADiB;AAEpB,aAAK,aAAU,CAAV,EAAa;AAAE,mBAAO,IAAI,GAAX;AAAgB,SAFhB;AAGpB,aAAK,EAAE,GAAG,EAAE,GAAG,GAAL,EAAL;AAHe,KAAd,CAAV;AAKA,MAAE,SAAF,CAAY,GAAZ,EAAiB,CAAE,CAAF,EAAK,CAAL,EAAQ,EAAR,EAAY,GAAZ,EAAiB,GAAjB,CAAjB;AACH,CAXD;;AAaA,KAAK,YAAL,EAAmB,UAAU,CAAV,EAAa;AAC5B,MAAE,IAAF,CAAO,CAAP;;AAEA,QAAI,MAAM,yCAAV;AACA,QAAI,MAAM,MAAM,GAAN,EAAW,IAAX,CAAgB,CAAhB,EAAmB,UAA7B;AACA,QAAI,MAAM,SAAS,GAAT,EAAc;AACpB,WAAG,CADiB;AAEpB,aAAK,aAAU,CAAV,EAAa;AAAE,mBAAO,IAAI,GAAX;AAAgB,SAFhB;AAGpB,aAAK,EAAE,GAAG,EAAE,GAAG,GAAL,EAAL;AAHe,KAAd,CAAV;AAKA,MAAE,KAAF,CAAQ,GAAR,EAAa,SAAb;AACH,CAXD;;AAaA,KAAK,SAAL,EAAgB,UAAU,CAAV,EAAa;AACzB,MAAE,IAAF,CAAO,CAAP;;AAEA,QAAI,MAAM,8CAAV;AACA,QAAI,MAAM,MAAM,GAAN,EAAW,IAAX,CAAgB,CAAhB,EAAmB,UAA7B;AACA,MAAE,SAAF,CAAY,SAAS,GAAT,CAAZ,EAA2B,CAAE,IAAF,EAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB,CAA3B;AACH,CAND;;AAQA,KAAK,eAAL,EAAsB,UAAS,CAAT,EAAY;AAC9B,MAAE,IAAF,CAAO,CAAP;;AAEA,QAAI,MAAM,6CAAV;AACA,QAAI,MAAM,MAAM,GAAN,EAAW,IAAX,CAAgB,CAAhB,EAAmB,UAA7B;AACA,MAAE,SAAF,CAAY,SAAS,GAAT,CAAZ,EAA2B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA3B;AACH,CAND;;AAQA,KAAK,yBAAL,EAAgC,UAAS,CAAT,EAAY;AACxC,MAAE,IAAF,CAAO,CAAP;;AAEA,QAAI,MAAM,6CAAV;AACA,QAAI,MAAM,MAAM,GAAN,EAAW,IAAX,CAAgB,CAAhB,EAAmB,UAA7B;AACA,MAAE,SAAF,CAAY,SAAS,GAAT,EAAc,EAAC,GAAG,CAAJ,EAAd,CAAZ,EAAmC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAnC;AACH,CAND","file":"eval-compiled.js","sourcesContent":["var test = require('tape');\nvar evaluate = require('../');\nvar parse = require('esprima').parse;\n\ntest('resolved', function (t) {\n    t.plan(1);\n    \n    var src = '[1,2,3+4*10+(n||6),foo(3+5),obj[\"\"+\"x\"].y]';\n    var ast = parse(src).body[0].expression;\n    var res = evaluate(ast, {\n        n: false,\n        foo: function (x) { return x * 100 },\n        obj: { x: { y: 555 } }\n    });\n    t.deepEqual(res, [ 1, 2, 49, 800, 555 ]);\n});\n\ntest('unresolved', function (t) {\n    t.plan(1);\n    \n    var src = '[1,2,3+4*10*z+n,foo(3+5),obj[\"\"+\"x\"].y]';\n    var ast = parse(src).body[0].expression;\n    var res = evaluate(ast, {\n        n: 6,\n        foo: function (x) { return x * 100 },\n        obj: { x: { y: 555 } }\n    });\n    t.equal(res, undefined);\n});\n\ntest('boolean', function (t) {\n    t.plan(1);\n    \n    var src = '[ 1===2+3-16/4, [2]==2, [2]!==2, [2]!==[2] ]';\n    var ast = parse(src).body[0].expression;\n    t.deepEqual(evaluate(ast), [ true, true, true, true ]);\n});\n\ntest('array methods', function(t) {\n    t.plan(1);\n\n    var src = '[1, 2, 3].map(function(n) { return n * 2 })';\n    var ast = parse(src).body[0].expression;\n    t.deepEqual(evaluate(ast), [2, 4, 6]);\n});\n\ntest('array methods with vars', function(t) {\n    t.plan(1);\n\n    var src = '[1, 2, 3].map(function(n) { return n * x })';\n    var ast = parse(src).body[0].expression;\n    t.deepEqual(evaluate(ast, {x: 2}), [2, 4, 6]);\n});\n"]}