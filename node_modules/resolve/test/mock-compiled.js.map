{"version":3,"sources":["mock.js"],"names":[],"mappings":"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","file":"mock-compiled.js","sourcesContent":["var test = require('tape');\nvar resolve = require('../');\n\ntest('mock', function (t) {\n    t.plan(6);\n    \n    var files = {\n        '/foo/bar/baz.js' : 'beep'\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('./baz', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg, undefined);\n    });\n    \n    resolve('./baz.js', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg, undefined);\n    });\n    \n    resolve('baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module 'baz' from '/foo/bar'\");\n    });\n    \n    resolve('../baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module '../baz' from '/foo/bar'\");\n    });\n});\n\ntest('mock from package', function (t) {\n    t.plan(6);\n    \n    var files = {\n        '/foo/bar/baz.js' : 'beep'\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            package : { main: 'bar' },\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('./baz', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg.main, 'bar');\n    });\n    \n    resolve('./baz.js', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg.main, 'bar');\n    });\n    \n    resolve('baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module 'baz' from '/foo/bar'\");\n    });\n    \n    resolve('../baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module '../baz' from '/foo/bar'\");\n    });\n});\n\ntest('mock package', function (t) {\n    t.plan(2);\n    \n    var files = {\n        '/foo/node_modules/bar/baz.js' : 'beep',\n        '/foo/node_modules/bar/package.json' : JSON.stringify({\n            main : './baz.js'\n        })\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('bar', opts('/foo'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/node_modules/bar/baz.js');\n        t.equal(pkg.main, './baz.js');\n    });\n});\n\ntest('mock package from package', function (t) {\n    t.plan(2);\n    \n    var files = {\n        '/foo/node_modules/bar/baz.js' : 'beep',\n        '/foo/node_modules/bar/package.json' : JSON.stringify({\n            main : './baz.js'\n        })\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            package : { main: 'bar' },\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('bar', opts('/foo'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/node_modules/bar/baz.js');\n        t.equal(pkg.main, './baz.js');\n    });\n});\n"]}